---
title: TUI API
description: アクション内でユーザーとインタラクティブにやり取りするための統合インターフェースのAPIリファレンス
---

# TUI API

TUI API は、アクション内でユーザーとインタラクティブにやり取りするための統合インターフェースです。プロンプト入力と出力表示の両方を提供します。

## 概要

```typescript
interface TuiAPI {
  prompt: PromptAPI
  output: OutputAPI
}
```

TUI APIは以下の2つの主要なAPIで構成されています：

- **[Prompt API](#prompt-api)**: ユーザーからの入力を取得
- **[Output API](#output-api)**: ターミナルへの出力を表示

## アクセス方法

TUI APIは、アクションのコンテキストから `tui` プロパティとしてアクセスできます：

```typescript
import { defineAction } from 'arere'

export default defineAction({
  name: 'my-action',
  description: 'My action',
  async run({ tui }) {
    // Prompt API を使用
    const name = await tui.prompt.text('What is your name?')

    // Output API を使用
    tui.output.success(`Hello, ${name}!`)
  },
})
```

## Prompt API

ユーザーからの入力を取得するためのメソッドを提供します。

### text(message, options?)

テキスト入力を取得します。

```typescript
const name = await tui.prompt.text('Enter your name:', {
  placeholder: 'John Doe',
  defaultValue: 'Guest',
  validate: (value) => {
    if (value.length < 2) {
      return 'Name must be at least 2 characters'
    }
    return true
  },
})
```

**パラメータ：**
- `message`: プロンプトメッセージ
- `options` (optional):
  - `placeholder`: プレースホルダーテキスト
  - `defaultValue`: デフォルト値
  - `validate`: バリデーション関数（`true` または エラーメッセージを返す）
  - `multiline`: 複数行入力を有効化

### number(message, options?)

数値入力を取得します。

```typescript
const age = await tui.prompt.number('Enter your age:', {
  defaultValue: 25,
  min: 0,
  max: 120,
  validate: (value) => {
    if (value < 18) {
      return 'Must be 18 or older'
    }
    return true
  },
})
```

**パラメータ：**
- `message`: プロンプトメッセージ
- `options` (optional):
  - `defaultValue`: デフォルト値
  - `min`: 最小値
  - `max`: 最大値
  - `validate`: バリデーション関数

### password(message, options?)

パスワード入力を取得します（マスク表示）。

```typescript
const password = await tui.prompt.password('Enter password:', {
  minLength: 8,
  placeholder: 'At least 8 characters',
  validate: (value) => {
    if (!/[A-Z]/.test(value)) {
      return 'Must contain uppercase letter'
    }
    return true
  },
})
```

**パラメータ：**
- `message`: プロンプトメッセージ
- `options` (optional):
  - `minLength`: 最小文字数
  - `placeholder`: プレースホルダーテキスト
  - `validate`: バリデーション関数

### select(message, choices, options?)

単一選択を取得します。

```typescript
const color = await tui.prompt.select(
  'Choose a color:',
  ['red', 'blue', 'green'],
  { defaultValue: 'blue' }
)

// または SelectChoice オブジェクトを使用
const option = await tui.prompt.select('Choose:', [
  { label: 'Option A', value: 'a', description: 'First option' },
  { label: 'Option B', value: 'b', description: 'Second option' },
])
```

**パラメータ：**
- `message`: プロンプトメッセージ
- `choices`: 選択肢の配列（文字列または `SelectChoice<T>` オブジェクト）
- `options` (optional):
  - `defaultValue`: デフォルト選択値

### confirm(message, options?)

Yes/No確認を取得します。

```typescript
const proceed = await tui.prompt.confirm('Continue?', {
  defaultValue: true,
})
```

**パラメータ：**
- `message`: プロンプトメッセージ
- `options` (optional):
  - `defaultValue`: デフォルト値（`true` または `false`）

### multiSelect(message, choices, options?)

複数選択を取得します。

```typescript
const features = await tui.prompt.multiSelect(
  'Select features:',
  ['feature1', 'feature2', 'feature3'],
  {
    min: 1,
    max: 2,
    defaultValue: ['feature1'],
  }
)
```

**パラメータ：**
- `message`: プロンプトメッセージ
- `choices`: 選択肢の配列
- `options` (optional):
  - `defaultValue`: デフォルト選択値の配列
  - `min`: 最小選択数
  - `max`: 最大選択数

## Output API

ターミナルへの出力を表示するためのメソッドを提供します。

### log(...args)

基本的なログメッセージを出力します。

```typescript
tui.output.log('This is a log message')
tui.output.log('Value:', 42, { key: 'value' })
```

**出力例：**
```
This is a log message
Value: 42 {"key":"value"}
```

### success(message)

成功メッセージを出力します（緑色、✓アイコン付き）。

```typescript
tui.output.success('Operation completed successfully!')
```

**出力例：**
```
✓ Operation completed successfully!
```

### error(message)

エラーメッセージを出力します（赤色、✗アイコン付き）。

```typescript
tui.output.error('An error occurred')
```

**出力例：**
```{color="error"}
✗ An error occurred{color="error"}
```

### warn(message)

警告メッセージを出力します（黄色、⚠ アイコン付き）。

```typescript
tui.output.warn('This is a warning')
```

**出力例：**
```
⚠ This is a warning
```

### info(message)

情報メッセージを出力します（青色、ℹ アイコン付き）。

```typescript
tui.output.info('For your information...')
```

**出力例：**
```
ℹ For your information...
```

### newline()

空行を挿入します。

```typescript
tui.output.newline()
```

**出力例：**
```
（空行）
```

### code(snippet)

コードスニペットを表示します（ボックスで囲まれて表示）。

```typescript
tui.output.code('const greeting = "Hello, World!"')
```

**出力例：**
```
`const greeting = "Hello, World!"`
```

### section(title)

セクションヘッダーを表示します（区切り線付き）。

```typescript
tui.output.section('Configuration Settings')
```

**出力例：**
```

=== Configuration Settings ===

```

### list(items)

箇条書きリストを表示します。

```typescript
tui.output.list([
  'First item',
  'Second item',
  'Third item',
])
```

**出力例：**
```
  • First item
  • Second item
  • Third item
```

### keyValue(data)

キー・バリューペアを表示します。

```typescript
tui.output.keyValue({
  Name: 'Arere',
  Version: '0.1.0',
  Language: 'TypeScript',
})
```

**出力例：**
```

  Name: Arere
  Version: 0.1.0
  Language: TypeScript

```

### table(data)

テーブルを表示します。

```typescript
tui.output.table([
  { Name: 'Alice', Age: 28, Role: 'Developer' },
  { Name: 'Bob', Age: 32, Role: 'Designer' },
])
```

**出力例：**
```

  Name | Age | Role
  --- | --- | ---
  Alice | 28 | Developer
  Bob | 32 | Designer

```

### json(data, indent?)

JSON形式で出力します。

```typescript
tui.output.json({ key: 'value', nested: { data: true } }, 2)
```

**出力例：**
```json
{
  "key": "value",
  "nested": {
    "data": true
  }
}
```

**パラメータ：**
- `data`: JSON化するデータ
- `indent`: インデントのスペース数（デフォルト: 2）

### separator(char?, length?)

水平区切り線を表示します。

```typescript
tui.output.separator('─', 50)
tui.output.separator('=', 30)
```

**出力例：**
```
──────────────────────────────────────────────────
==============================
```

**パラメータ：**
- `char`: 区切り文字（デフォルト: `'-'`）
- `length`: 長さ（デフォルト: 40）

### step(number, description)

番号付きステップを表示します。

```typescript
tui.output.step(1, 'Initialize configuration')
tui.output.step(2, 'Load plugins')
tui.output.step(3, 'Start application')
```

**出力例：**
```

[1] Initialize configuration

[2] Load plugins

[3] Start application
```

## 実践例

### 基本的な使用例

```typescript
export default defineAction({
  name: 'user-setup',
  description: 'User setup wizard',
  async run({ tui }) {
    tui.output.section('User Setup Wizard')
    tui.output.newline()

    // ユーザー情報を収集
    const name = await tui.prompt.text('Enter your name:')
    const age = await tui.prompt.number('Enter your age:', { min: 0 })

    // 確認
    tui.output.keyValue({ Name: name, Age: age })
    tui.output.newline()

    const confirm = await tui.prompt.confirm('Is this correct?')

    if (confirm) {
      tui.output.success('Setup completed!')
    } else {
      tui.output.warn('Setup cancelled')
    }
  },
})
```

### 複雑な出力例

```typescript
export default defineAction({
  name: 'system-status',
  description: 'Show system status',
  async run({ tui }) => {
    tui.output.section('System Status Report')
    tui.output.newline()

    // ステップ表示
    tui.output.step(1, 'Checking services')
    tui.output.success('All services running')
    tui.output.newline()

    // テーブル表示
    tui.output.step(2, 'Resource usage')
    tui.output.table([
      { Resource: 'CPU', Usage: '45%', Status: 'Normal' },
      { Resource: 'Memory', Usage: '72%', Status: 'Normal' },
      { Resource: 'Disk', Usage: '88%', Status: 'Warning' },
    ])
    tui.output.newline()

    // リスト表示
    tui.output.step(3, 'Recent events')
    tui.output.list([
      'Service started at 10:00',
      'Backup completed at 11:30',
      'Update available',
    ])

    tui.output.separator()
    tui.output.success('Status check completed')
  },
})
```

## 関連項目

- [Action開発ガイド](../ja/guides/creating-actions.md)
- [defineAction API](./defineAction.md)
- [Shell実行API](./shell.md)
