---
title: GitHub Actions統合とは
description: arereアクションをGitHub Actionsワークフローで使用する方法
---

# GitHub Actions統合とは

ArereアクションをGitHub Actionsワークフローで使用して、型安全なCI/CDを実現できます。

## メリット

- **型安全** - 実行前にエラーを検出
- **より良いエラー処理** - `set -e`や`$?`チェックは不要
- **再利用可能** - 同じアクションをローカルとCIで実行
- **IDEサポート** - オートコンプリート、リファクタリング
- **テスト可能** - CI/CDロジックをユニットテスト

## クイックスタート

### 1. アクションを作成

```typescript
// .arere/actions/deploy.ts
import { defineAction } from 'arere'

export default defineAction({
  name: 'deploy',
  description: '本番環境にデプロイ',
  async run({ $, tui, env }) {
    tui.output.section('ビルド中')
    await $`npm run build`

    tui.output.section('デプロイ中')
    await $`npm run deploy`

    tui.output.success('デプロイ完了！')
  }
})
```

### 2. GitHub Actionsで使用

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: ./actions/arere-action
        with:
          action: deploy
```

### 3. ローカルでテスト

```bash
arere run deploy
```

## Before/After比較

### Before: Bashスクリプト

```yaml
- name: Deploy
  run: |
    set -e
    if [ -z "$API_KEY" ]; then
      echo "Error: API_KEY is required"
      exit 1
    fi
    npm run build
    npm run deploy
```

### After: ArereでTypeScript

```typescript
export default defineAction({
  name: 'deploy',
  async run({ $, tui, env }) {
    if (!env.API_KEY) {
      throw new Error('API_KEY is required')
    }

    tui.output.section('ビルド中')
    await $`npm run build`

    tui.output.section('デプロイ中')
    await $`npm run deploy`

    tui.output.success('デプロイ完了！')
  }
})
```

## Headlessモードの制限

GitHub Actions（headlessモード）では、対話的なプロンプトは使用できません：

```typescript
// ❌ CI では動作しません
const name = await tui.prompt.text('名前を入力:')

// ✅ 環境変数を使用
const name = env.NAME || 'default-value'
```

**CI対応のベストプラクティス:**

1. 入力には環境変数を使用
2. シークレットはGitHub Secretsで管理
3. デフォルト値を提供

---

## 次のステップ

- [一般的なパターン](./02.patterns) - 環境変数、パイプライン
- [高度な使用方法](./03.advanced) - アーティファクト、マトリックスビルド
