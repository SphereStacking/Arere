---
title: 高度な使用方法
description: アーティファクト、マトリックスビルド、コンポジットアクション
---

# 高度な使用方法

## アーティファクトとキャッシュ

ArereでGitHub Actionsのアーティファクトを使用：

```yaml
- name: Build
  uses: ./actions/arere-action
  with:
    action: build

- name: Upload artifacts
  uses: actions/upload-artifact@v4
  with:
    name: build-output
    path: dist/

- name: Download artifacts
  uses: actions/download-artifact@v4
  with:
    name: build-output
    path: dist/

- name: Deploy
  uses: ./actions/arere-action
  with:
    action: deploy
```

## マトリックスビルド

複数の環境でテストを実行：

```yaml
strategy:
  matrix:
    node: [18, 20]
    os: [ubuntu-latest, windows-latest]

steps:
  - uses: ./actions/arere-action
    with:
      action: test
      node-version: ${{ matrix.node }}
```

## コンポジットアクション

複数のアクションを組み合わせて再利用可能なアクションを作成：

```typescript
// .arere/actions/test-and-deploy.ts
export default defineAction({
  name: 'test-and-deploy',
  description: 'テスト後、成功したらデプロイ',
  async run({ $ }) {
    // testアクションを実行
    await $`arere run test`

    // deployアクションを実行
    await $`arere run deploy`
  }
})
```
