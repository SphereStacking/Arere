# ターミナルマルチプレクサ統合

arere を tmux や Zellij と組み合わせて使用することで、より効率的なワークフローを構築できます。

## tmux 統合

### 基本的な使い方

以下のスクリプトを `arere-tmux.sh` として保存し、実行します:

```bash
#!/bin/bash
# tmux integration for arere

SESSION_NAME="arere"

# Create new tmux session with 'arere' in the main pane
# and split the window vertically (70% for the bottom pane)
tmux new-session -s $SESSION_NAME -n main \
  'arere' \; \
  split-window -v -p 70 \; \
  select-pane -t 0 \; \
  bind-key Tab select-pane -t :.+
```

これにより、以下のレイアウトで tmux セッションが起動します:

```
┌────────────────────────────┐
│ arere                      │  ← arere が常駐
│ > git-commit               │
│   docker-up                │
├────────────────────────────┤
│ $ git status               │  ← 通常のシェル
│ On branch main             │
│ $ █                        │
└────────────────────────────┘
```

### tmux.conf への設定追加（オプション）

`~/.tmux.conf` に以下を追加すると、Tab キーでペイン切り替えができます:

```bash
bind-key Tab select-pane -t :.+
```

### 特徴

- **上ペイン**: arere が常駐し、アクションを選択・実行できます
- **下ペイン**: 通常のシェル作業用（70% のスペース）
- **Tab キー**: ペイン間を素早く切り替え

### セッション管理

```bash
# セッションにアタッチ
tmux attach -t arere

# セッションを終了
tmux kill-session -t arere
```

## Zellij 統合

### 基本的な使い方

以下のレイアウトファイルを `arere.kdl` として保存します:

```kdl
// Zellij layout configuration for arere
layout {
    pane split_direction="vertical" {
        // arere running in 40% of the window (left side)
        pane command="arere" size="40%"

        // Regular shell in 60% of the window (right side)
        pane
    }
}
```

起動コマンド:

```bash
zellij --layout arere.kdl
```

これにより、以下のレイアウトで Zellij が起動します:

```
┌───────────────┬───────────────┐
│ arere         │ $ git status  │
│ > commit      │ On branch main│
│   build       │ $ █           │
│   deploy      │               │
└───────────────┴───────────────┘
```

### 既存セッションにレイアウトを適用

```bash
# 新しいタブを作成してレイアウトを適用
zellij action new-tab --layout arere.kdl
```

### 特徴

- **左ペイン**: arere が常駐し、アクションを選択・実行できます（40% のスペース）
- **右ペイン**: 通常のシェル作業用（60% のスペース）
- **Alt + 矢印キー**: ペイン間を切り替え（Zellij デフォルト）

### カスタマイズ

レイアウトをカスタマイズする場合は、`arere.kdl` を編集してください:

```kdl
layout {
    pane split_direction="horizontal" {  // 水平分割に変更
        pane command="arere" size="20%"    // サイズを 20% に変更
        pane
    }
}
```

### Zellij 設定ファイルに追加

`~/.config/zellij/config.kdl` に以下を追加すると、常に arere レイアウトで起動します:

```kdl
default_layout "arere"
```

その後、レイアウトファイルを `~/.config/zellij/layouts/arere.kdl` に配置してください。

### 操作方法

- **Alt + 矢印キー**: ペイン間を切り替え
- **Ctrl+t + q**: Zellij を終了
- **Ctrl+t + d**: セッションをデタッチ
