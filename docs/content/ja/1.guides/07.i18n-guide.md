---
title: i18n国際化ガイド
description: arereプロジェクトで国際化（i18n）を使用する方法
---

# i18n 国際化ガイド

arereで国際化（i18n）を扱う方法について説明します。

## 概要

Arereは独自の軽量翻訳システムで複数の言語をサポートしています。

**サポート言語:**
- **English (en)** - デフォルト言語
- **Japanese (ja)** - 日本語

## 設定

### ロケールの設定

`.arere/settings.json`で言語を設定：

```json
{
  "locale": "ja"
}
```

### ロケール検出の優先順位

1. **設定ファイル** - `settings.json`の`locale`フィールド
2. **システムロケール** - `LANG`または`LC_ALL`環境変数
3. **デフォルト** - 英語（`en`）

---

## プラグイン開発者向け

プラグインは独自の翻訳を提供できます。

### ディレクトリ構造

```
arere-plugin-example/
├── locales/
│   ├── en/
│   │   └── translation.json
│   └── ja/
│       └── translation.json
├── src/
│   └── index.ts
└── actions/
    └── example.ts
```

### 翻訳ファイル

**`locales/translation.json`:**
```json
{
  "greeting": "Hello from plugin!",
  "actions": {
    "confirm": "Are you sure?"
  }
}
```

**`locales/translation.json`:**
```json
{
  "greeting": "プラグインからこんにちは!",
  "actions": {
    "confirm": "よろしいですか?"
  }
}
```

### プラグインでの登録

```typescript
import { definePlugin } from 'arere'

export default definePlugin({
  meta: {
    name: 'arere-plugin-example',
    version: '1.0.0',
  },
  actions: ['actions/example.ts'],
  locales: 'locales',  // localesディレクトリを指定
})
```

### アクションでの使用

`plugin:` プレフィックスで翻訳にアクセス：

```typescript
import { defineAction } from 'arere'

export default defineAction({
  name: 'plugin-action',
  description: ({ t }) => t('plugin:actions.demo.description'),
  async run({ tui, t }) {
    // プラグインの翻訳
    const greeting = t('plugin:greeting')
    tui.output.log(greeting)

    const confirmed = await tui.prompt.confirm(
      t('plugin:actions.confirm')
    )
  },
})
```

### パッケージ設定

`package.json`に`locales`を含める：

```json
{
  "files": ["dist", "actions", "locales"]
}
```

---

## ユーザーアクション開発者向け

ユーザーアクション（プロジェクト/グローバル）はインライン翻訳をサポートします。

### Inline Translations

`translations`プロパティで翻訳を埋め込み：

```typescript
import { defineAction } from 'arere'

export default defineAction({
  name: 'greet',
  description: ({ t }) => t('description'),
  translations: {
    en: {
      description: 'Greet someone',
      greeting: 'Hello, {{name}}!',
      prompt: { name: 'What is your name?' }
    },
    ja: {
      description: '挨拶する',
      greeting: 'こんにちは、{{name}}さん!',
      prompt: { name: 'お名前は？' }
    }
  },
  async run({ t, tui }) {
    const name = await tui.prompt.text(t('prompt.name'))
    tui.output.log(t('greeting', { name }))
  }
})
```

**ポイント:**
- `t()` はアクション自身の名前空間をデフォルトで使用
- プレフィックスなしでアクセス可能

### メリット

- **単一ファイル** - 翻訳とコードを一緒に保つ
- **ファイル構造不要** - `locales/`ディレクトリ不要
- **ポータブル** - 単一ファイルで共有可能

---

## どちらのアプローチを使うべきか

| アプローチ | 最適な用途 |
|----------|----------|
| **Inline Translations** | ユーザーアクション、小規模な翻訳 |
| **locales/ ディレクトリ** | プラグイン、大規模な翻訳 |

---

## ベストプラクティス

1. **常にすべてのロケールに翻訳を追加**
2. **パラメータを使用** - `{{name}}`、文字列連結は避ける
3. **意味のあるキー名を使用**

### 良い例

```typescript
// パラメータを使用
t('greeting', { name })

// 階層的なキー
t('messages.success')
```

### 悪い例

```typescript
// 文字列連結
"Hello, " + name + "!"

// 意味のないキー名
t('msg1')
```
