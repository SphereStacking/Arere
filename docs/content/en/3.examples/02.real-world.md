---
title: Real-World Examples
description: Complex action samples for actual development workflows
---

# Real-World Examples

More complex action samples for real development workflows.

## Pull Request Creation

Interactively create pull requests with GitHub CLI integration.

```typescript
// ~/.arere/create-pr.ts
import { defineAction } from 'arere'

export default defineAction({
  name: 'create-pr',
  description: 'Create a pull request',
  category: 'git',
  async run({ $, tui }) {
    // Get branch list
    const { stdout } = await $`git branch --format=%(refname:short)`
    const branches = stdout.split('\n').filter(Boolean)

    // Select target branch
    const targetBranch = await tui.prompt.select('Merge into:', branches)

    // Enter PR title and description
    const title = await tui.prompt.text('PR title:', {
      validate: v => v.length > 0 || 'Please enter a title',
    })

    const description = await tui.prompt.text('PR description:', {
      placeholder: 'Enter change description...',
    })

    // Check if draft
    const isDraft = await tui.prompt.confirm('Create as draft PR?', { defaultValue: false })

    // Confirmation
    tui.output.section('PR Information')
    tui.output.log(`  Title: ${title}`)
    tui.output.log(`  Merge into: ${targetBranch}`)
    tui.output.log(`  Draft: ${isDraft ? 'Yes' : 'No'}`)

    const confirmed = await tui.prompt.confirm('Create PR with this information?', { defaultValue: true })

    if (!confirmed) {
      tui.output.warn('Cancelled')
      return
    }

    // Create PR
    const draftFlag = isDraft ? '--draft' : ''
    await $`gh pr create --title ${title} --body ${description} --base ${targetBranch} ${draftFlag}`

    tui.output.success('PR created')
  }
})
```

---

## Deploy Action

Deploy action with progress indicator.

```typescript
// ~/.arere/deploy.ts
import { defineAction } from 'arere'

export default defineAction({
  name: 'deploy',
  description: 'Deploy application',
  category: 'deploy',
  async run({ $, tui, env }) {
    // Select environment
    const environment = await tui.prompt.select('Deploy to:', [
      { label: 'Staging', value: 'staging' },
      { label: 'Production', value: 'production' },
    ])

    // Confirm for production
    if (environment === 'production') {
      const confirmed = await tui.prompt.confirm(
        'Deploy to production. Are you sure?',
        { defaultValue: false }
      )
      if (!confirmed) {
        tui.output.warn('Cancelled')
        return
      }
    }

    // Show progress with spinner
    const spinner = tui.control.spinner({ message: 'Running tests...' })
    spinner.start()

    // Run tests
    const testResult = await $`npm test`
    if (testResult.exitCode !== 0) {
      spinner.fail('Tests failed')
      return
    }
    spinner.update('Building...')

    // Build
    const buildResult = await $`npm run build`
    if (buildResult.exitCode !== 0) {
      spinner.fail('Build failed')
      return
    }
    spinner.update('Deploying...')

    // Deploy
    const deployResult = await $`npm run deploy:${environment}`
    if (deployResult.exitCode !== 0) {
      spinner.fail('Deploy failed')
      return
    }

    spinner.succeed(`Deployed to ${environment}`)
  }
})
```

---

## Batch File Processing

Use progress bar when processing multiple files.

```typescript
// ~/.arere/batch-convert.ts
import { defineAction } from 'arere'
import { readdirSync } from 'node:fs'

export default defineAction({
  name: 'batch-convert',
  description: 'Batch convert images',
  async run({ $, tui }) {
    // Get target files
    const files = readdirSync('.').filter(f => f.endsWith('.png'))

    if (files.length === 0) {
      tui.output.warn('No PNG files found')
      return
    }

    // Select output format
    const format = await tui.prompt.select('Output format:', [
      { label: 'JPEG', value: 'jpg' },
      { label: 'WebP', value: 'webp' },
    ])

    // Process with progress bar
    const progress = tui.control.progress({
      total: files.length,
      message: 'Converting files...'
    })

    progress.start()

    for (const file of files) {
      const output = file.replace('.png', `.${format}`)
      await $`convert ${file} ${output}`
      progress.increment()
    }

    progress.succeed(`Converted ${files.length} files`)
  }
})
```

---

## Setup Wizard

Project setup using multi-step forms.

```typescript
// ~/.arere/project-setup.ts
import { defineAction } from 'arere'
import { writeFileSync, mkdirSync } from 'node:fs'

export default defineAction({
  name: 'project-setup',
  description: 'Set up a project',
  async run({ $, tui }) {
    // Collect settings with step form
    const config = await tui.prompt([
      {
        title: 'Step 1: Basic Settings',
        fields: {
          name: { type: 'text', message: 'Project name' },
          version: { type: 'text', message: 'Version', defaultValue: '1.0.0' },
        },
      },
      {
        title: 'Step 2: Feature Selection',
        fields: {
          typescript: { type: 'confirm', message: 'Use TypeScript?' },
          eslint: { type: 'confirm', message: 'Use ESLint?' },
          prettier: { type: 'confirm', message: 'Use Prettier?' },
        },
      },
      {
        title: 'Step 3: Package Manager',
        fields: {
          packageManager: {
            type: 'select',
            message: 'Package manager',
            choices: ['npm', 'yarn', 'pnpm'],
          },
        },
      },
    ])

    // Create directory
    mkdirSync(config.name, { recursive: true })
    process.chdir(config.name)

    // Show progress with spinner
    const spinner = tui.control.spinner({ message: 'Initializing project...' })
    spinner.start()

    // Create package.json
    const pkg = {
      name: config.name,
      version: config.version,
      type: 'module',
      scripts: {},
      dependencies: {},
      devDependencies: {},
    }
    writeFileSync('package.json', JSON.stringify(pkg, null, 2))

    // Install dependencies
    const installCmd = config.packageManager === 'npm' ? 'install' : 'add'
    const devFlag = config.packageManager === 'npm' ? '--save-dev' : '-D'

    if (config.typescript) {
      spinner.update('Installing TypeScript...')
      const tsResult = await $`${config.packageManager} ${installCmd} ${devFlag} typescript @types/node`
      if (tsResult.exitCode !== 0) {
        spinner.fail('Failed to install TypeScript')
        return
      }
    }

    if (config.eslint) {
      spinner.update('Installing ESLint...')
      const eslintResult = await $`${config.packageManager} ${installCmd} ${devFlag} eslint`
      if (eslintResult.exitCode !== 0) {
        spinner.fail('Failed to install ESLint')
        return
      }
    }

    if (config.prettier) {
      spinner.update('Installing Prettier...')
      const prettierResult = await $`${config.packageManager} ${installCmd} ${devFlag} prettier`
      if (prettierResult.exitCode !== 0) {
        spinner.fail('Failed to install Prettier')
        return
      }
    }

    spinner.succeed('Project created')
    tui.output.info(`\nRun cd ${config.name} to enter the directory`)
  }
})
```

---

## Database Migration

Database migration action with confirmation.

```typescript
// ~/.arere/db-migrate.ts
import { defineAction } from 'arere'

export default defineAction({
  name: 'db-migrate',
  description: 'Database migration',
  category: 'database',
  async run({ $, tui, env }) {
    // Check environment
    const dbEnv = env.DATABASE_ENV || 'development'

    tui.output.info(`Current environment: ${dbEnv}`)

    // Check pending migrations
    const { stdout: pending } = await $`npm run db:migrate:status`
    tui.output.log(pending)

    // Select action
    const action = await tui.prompt.select('Action to perform:', [
      { label: 'Run migration', value: 'up' },
      { label: 'Rollback', value: 'down' },
      { label: 'Check status', value: 'status' },
    ])

    if (action === 'status') {
      return
    }

    // Confirm for production
    if (dbEnv === 'production') {
      const confirmed = await tui.prompt.confirm(
        `Run ${action === 'up' ? 'migration' : 'rollback'} on production. Are you sure?`,
        { defaultValue: false }
      )
      if (!confirmed) {
        tui.output.warn('Cancelled')
        return
      }
    }

    // Execute
    const spinner = tui.control.spinner({ message: 'Running...' })
    spinner.start()

    const result = await $`npm run db:migrate:${action}`
    if (result.exitCode !== 0) {
      spinner.fail('Failed')
      return
    }
    spinner.succeed('Completed')
  }
})
```

---

## Next Steps

- [Quick Examples](./01.quick-examples) - Simple example collection
- [Advanced Techniques](/en/1.guides/03.actions/05.advanced) - Progress display, CI/CD, i18n
