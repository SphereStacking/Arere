---
title: Troubleshooting
description: Common problems and solutions
---

# Troubleshooting

A collection of common problems and solutions.

## Installation Issues

### `arere: command not found`

npm's global directory is not included in PATH.

**Solution 1**: Add to PATH

```bash
# Check PATH
echo $PATH
npm bin -g

# Add to PATH
echo 'export PATH=$(npm bin -g):$PATH' >> ~/.bashrc
source ~/.bashrc
```

**Solution 2**: Change npm's global directory

```bash
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc

# Reinstall
npm install -g arere
```

### Permission Error (EACCES)

When `npm install -g` fails with permission error on macOS/Linux.

**Solution**: Change npm's global directory

```bash
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc

npm install -g arere
```

:::alert{type="warning"}
`sudo npm install -g` is not recommended. It poses security risks.
:::

---

## Action Issues

### Action Not Found

When actions are not displayed.

**Check Points**:

1. Verify action file placement
   ```bash
   ls -la ~/.arere
   ls -la ./.arere
   ```

2. Verify file extension is `.ts`

3. Verify action is exported with `export default`
   ```typescript
   export default defineAction({...})  // ✅
   const action = defineAction({...})  // ❌ No export
   ```

4. Clear cache
   ```bash
   rm -rf ~/.cache/arere
   ```

### TypeScript Compile Error

TypeScript errors in actions.

**Solution**:

arere attempts to run even with compile errors. To type check:

```bash
npx tsc --noEmit your-action.ts
```

Fix errors or temporarily ignore with `@ts-ignore`:

```typescript
// @ts-ignore
const result = someFunctionWithTypeError()
```

### Action Hangs (Doesn't Complete)

When an action doesn't finish.

**Possible Causes**:

1. **Infinite loop**: Check termination conditions for while or for loops
2. **Promise not resolving**: Check await usage
3. **External process doesn't terminate**: Check shell command execution

**Debugging**:

```typescript
export default defineAction({
  async run({ tui }) {
    tui.output.log('Step 1')
    await someFunction()
    tui.output.log('Step 2')  // Check if this is reached
    // ...
  }
})
```

---

## Shell Command Issues

### Command Not Executing

When shell commands with `$` don't work.

**Check Points**:

1. Is `$` properly imported?
   ```typescript
   async run({ $ }) {  // ✅ Destructure $
     await $`git status`
   }
   ```

2. Is `await` included?
   ```typescript
   await $`git status`    // ✅
   $`git status`          // ❌ No await
   ```

### Command Errors Are Ignored

When commands fail without raising errors.

**Cause**: `$` doesn't throw errors. You need to check the `exitCode` of the result object.

**Solution**: Check exit code

```typescript
const result = await $`git status`
if (result.exitCode !== 0) {
  tui.output.error('Command failed')
}
```

---

## Configuration File Issues

### Settings Not Applied

Check if the config file is in the correct location:

```bash
# User settings
cat ~/.arere/settings.json

# Workspace settings
cat .arere/settings.json
```

Check if the config file is valid JSON:

```bash
cat .arere/settings.json | jq
```

### Keybindings Not Responding

1. **Check JSON syntax**
   ```bash
   cat .arere/keybindings.json | jq
   ```

2. **Check key notation is correct**
   - `Ctrl+C` → `ctrl+c` (lowercase)
   - `Enter` → `enter`
   - `Escape` → `esc` or `escape`

3. **Check all actions in scope are defined**
   Complete replacement requires all actions when defining a scope.

4. **Terminal limitations**
   Some key combinations may not work in certain terminals.

### JSON Parse Error

Common errors:
- Trailing comma
- Missing double quotes
- Mismatched brackets

```bash
# Validate with jq
cat .arere/settings.json | jq
```

---

## Plugin Issues

### Plugin Not Recognized

When installed plugins are not displayed.

**Check Points**:

1. Verify plugin is installed
   ```bash
   npm list -g | grep arere-plugin
   ```

2. Verify plugin name starts with `arere-plugin-`

3. Verify plugin is enabled in config
   ```json
   // ~/.arere/settings.json
   {
     "plugins": {
       "arere-plugin-git": true
     }
   }
   ```

4. Clear cache
   ```bash
   rm -rf ~/.cache/arere
   ```

### Plugin Translations Not Displayed

When translations don't work for multilingual plugins.

**Check Points**:

1. Is the `locales` directory in the correct location?
   ```
   arere-plugin-example/
   ├── locales/
   │   ├── en/translation.json
   │   └── ja/translation.json
   ```

2. Is `locales` specified in plugin definition?
   ```typescript
   export default definePlugin({
     meta: { name: 'arere-plugin-example', version: '1.0.0' },
     actions: ['actions/example.ts'],
     locales: 'locales'  // Add this line
   })
   ```

3. Is `locales` included in `package.json` `files`?
   ```json
   "files": ["dist", "actions", "locales"]
   ```

4. Is `plugin:` prefix used in actions?
   ```typescript
   t('plugin:greeting')  // ✅
   t('greeting')         // ❌
   ```

---

## CI/CD Issues

### Not Working in GitHub Actions

When errors occur in GitHub Actions.

**Check Points**:

1. Node.js version
   ```yaml
   - uses: actions/setup-node@v4
     with:
       node-version: '18'  # 18 or higher
   ```

2. Is arere installed?
   ```yaml
   - run: npm install arere
   ```

3. Is action name correct?
   ```yaml
   - run: npx arere run deploy  # Verify action name
   ```

4. Are environment variables set?
   ```yaml
   - run: npx arere run deploy
     env:
       API_KEY: ${{ secrets.API_KEY }}
   ```

### Action Not Found (CI Environment)

**Error:** `Action "my-action" not found`

Verify action file exists in `.arere/` directory and exports a default object with `name` and `run`.

### Environment Variables Unavailable

**Error:** `Cannot read property 'API_KEY' of undefined`

Ensure `env:` section is set in your workflow:

```yaml
- uses: ./actions/arere-action
  with:
    action: deploy
  env:
    API_KEY: ${{ secrets.API_KEY }}
```

### Exit Code Issues

**Problem:** GitHub Actions shows success even when command fails

Use `await $\`...\`` and check exit code:

```typescript
const result = await $`npm test`
if (result.exitCode !== 0) {
  throw new Error('Command failed')
}
```

---

## Performance Issues

### Slow Startup

When arere takes time to start.

**Solutions**:

1. Clear cache
   ```bash
   rm -rf ~/.cache/arere
   ```

2. Remove unnecessary plugins

3. Reduce number of action files

### High Memory Usage

When consuming a lot of memory.

**Possible Causes**:

- Loading large files into memory
- Creating many objects in loops

**Solutions**:

- Use streaming processing
- Release unnecessary data early

---

## If Problems Persist

1. **Check GitHub Issues**
   It might be a known issue:
   https://github.com/your-org/arere/issues

2. **Run in debug mode**
   ```bash
   DEBUG=arere* arere
   ```

3. **Create a new Issue**
   Include the following information:
   - arere version (`arere --version`)
   - Node.js version (`node --version`)
   - OS and version
   - Full error message
   - Steps to reproduce
